From c9704a5cd29a8cd9af9f841df2d7aaee01440a9a Mon Sep 17 00:00:00 2001
From: Andre McCurdy <armccurdy@gmail.com>
Date: Fri, 19 Apr 2019 15:55:30 -0700
Subject: [PATCH] always disable ARM -munaligned-access

Signed-off-by: Andre McCurdy <armccurdy@gmail.com>
---
 gcc/config/arm/arm.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/gcc/config/arm/arm.c b/gcc/config/arm/arm.c
index 08120c6..77407da 100644
--- a/gcc/config/arm/arm.c
+++ b/gcc/config/arm/arm.c
@@ -3050,13 +3050,13 @@ arm_option_override_internal (struct gcc_options *opts,
      - ARMv6-M architecture-based processors
      - ARMv8-M Baseline processors.  */
 
+  /* Hack for Intel Puma6 (ARMv6 but broken): always disable -munaligned-access */
+
   if (! opts_set->x_unaligned_access)
     {
-      opts->x_unaligned_access = (TARGET_32BIT_P (opts->x_target_flags)
-			  && arm_arch6 && (arm_arch_notm || arm_arch7));
+      opts->x_unaligned_access = 0;
     }
-  else if (opts->x_unaligned_access == 1
-	   && !(arm_arch6 && (arm_arch_notm || arm_arch7)))
+  else if (opts->x_unaligned_access == 1)
     {
       warning (0, "target CPU does not support unaligned accesses");
      opts->x_unaligned_access = 0;
-- 
1.9.1

